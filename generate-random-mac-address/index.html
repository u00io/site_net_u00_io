{#header.html#}

{%title=Generate Random MAC Address%}
{%description=Generate a random MAC address for network testing and configuration purposes.%}

<h1>Generate Random MAC Address</h1>
<p>
    This tool generates a random MAC (Media Access Control) address that can be used for network testing and
    configuration purposes. A MAC address is a unique identifier assigned to network interfaces for communications on
    the physical network segment.
</p>

<h2>Generated MAC Address</h2>
<script>
    var error = '';
    var macAddress = '';
    function getRandomHexDigit() {
        return Math.floor(Math.random() * 16).toString(16).toUpperCase();
    }
    function parsePrefix() {
        // Get the prefix from the input field and split it into an array
        // Check for valid hex-formatted prefix: 2B1C. .. etc
        var prefixInput = document.getElementById('prefix').value;
        var prefix = prefixInput.replace(/[^A-Fa-f0-9]/g, '').toUpperCase();
        console.log('Parsed prefix:', prefix);
        if (prefix.length % 2 !== 0 || prefix.length > 10) {
            document.getElementById('error_message').textContent = 'Invalid prefix. Please enter a valid hex-formatted prefix (up to 5 bytes).';
            return null;
        }
        return prefix;
    }

    function generateMacAddress() {
        var prefix = parsePrefix();
        if (prefix === null) {
            return;
        }
        macAddress = prefix;
        // Generate random hex digits to complete the MAC address
        while (macAddress.length < 12) {
            macAddress += getRandomHexDigit();
        }
        // Format the MAC address as XX:XX:XX:XX:XX:XX
        var formattedMac = '';
        for (var i = 0; i < 12; i += 2) {
            formattedMac += macAddress.substr(i, 2);
            if (i < 10) {
                formattedMac += ':';
            }
        }
        document.getElementById('mac_address').value = formattedMac;
        document.getElementById('error_message').textContent = '';
    }

    function copyInputValueToClipboard(btnId, inputId) {
        var macAddressField = document.getElementById(inputId);
        var macAddress = macAddressField.value;
        var copyButton = document.getElementById(btnId);
        
        if (macAddress) {
            navigator.clipboard.writeText(macAddress).then(function() {
                copyButton.innerHTML = '<svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M20 6L9 17l-5-5"/></svg>';
                copyButton.style.backgroundColor = '#4CAF50';
                
                setTimeout(function() {
                    copyButton.innerHTML = '<svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"/><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"/></svg>';
                    copyButton.style.backgroundColor = '#6c757d';
                }, 3000);
            }, function(err) {
                console.error('Failed to copy MAC address: ', err);
                alert('Failed to copy MAC address');
            });
        } else {
            alert('No MAC address to copy.');
        }
    }
</script>
<style>
    .btn-copy {
        font-size: 16px;
        width: 40px;
        height: 40px;
        padding: 0;
        background-color: #6c757d;
        color: #FFFFFF;
        border: none;
        border-radius: 4px;
        cursor: pointer;
        transition: background-color 0.3s ease;
        display: flex;
        align-items: center;
        justify-content: center;
    }
    
    .btn-copy:hover {
        background-color: #5a6268;
    }
    
    .btn-clear {
        width: 40px;
        height: 40px;
        padding: 0;
        background-color: #dc3545;
        color: #FFFFFF;
        border: none;
        border-radius: 4px;
        cursor: pointer;
        transition: background-color 0.3s ease;
        display: flex;
        align-items: center;
        justify-content: center;
        margin-left: 8px;
    }
    
    .btn-clear:hover {
        background-color: #c82333;
    }
</style>

<div style="display: flex; flex-direction: column; gap: 12px; align-items: center; margin-top: 12px;">
    <div style="display: flex; flex-direction: column; gap: 6px; align-items: center;">
        <label for="prefix" style="font-weight: bold; font-size: 14px;">Prefix</label>
        <div style="display: flex; flex-direction: row; gap: 0; align-items: center;">
            <input type="text" id="prefix"
                style="font-family: 'Consolas', 'Courier New', Courier, monospace; font-size: 24px; width: 250px; height: 40px;" />
        <button class="btn-clear" onclick="document.getElementById('prefix').value = ''; document.getElementById('error_message').textContent = '';">
            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <line x1="18" y1="6" x2="6" y2="18"/>
                <line x1="6" y1="6" x2="18" y2="18"/>
            </svg>
        </button>
        </div>
    </div>
    <button onclick="generateMacAddress()" class="big">Generate</button>
    <div style="display: flex; flex-direction: row; gap: 12px; align-items: center;">
        <input type="text" id="mac_address" readonly
            style="font-family: 'Consolas', 'Courier New', Courier, monospace; font-size: 24px; width: 250px; height: 40px;" />
        <button id="copy_button" class="btn-copy" onclick="copyInputValueToClipboard('copy_button', 'mac_address')">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <rect x="9" y="9" width="13" height="13" rx="2" ry="2"/>
                <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"/>
            </svg>
        </button>
    </div>
    <div id="error_message" style="color: red; font-weight: bold; min-height: 24px;"></div>
</div>

{#bottom.html#}
