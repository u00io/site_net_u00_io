{#header.html#}

{%title=Generate MAC Address — u00 Network Tools%}
{%description=Generate valid MAC addresses for testing, virtualization, and documentation. Control unicast/multicast and locally administered bits.%}

<style>
    .code-container {
        position: relative;
        margin: 20px 0;
        border-radius: 8px;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        overflow: hidden;
        border: 1px solid #e1e5e9;
    }
    
    .code-container pre {
        margin: 0;
        padding: 20px;
        background-color: #f8f9fa;
        border-radius: 0;
        overflow-x: auto;
        font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
        font-size: 14px;
        line-height: 1.5;
    }
    
    .code-container code {
        background: none;
        padding: 0;
        border-radius: 0;
        font-family: inherit;
    }
    
    .code-header {
        background: linear-gradient(90deg, #2d3748 0%, #4a5568 100%);
        color: white;
        padding: 12px 20px;
        font-size: 14px;
        font-weight: 600;
        border-bottom: 1px solid #e1e5e9;
    }
</style>

<h1>Generate MAC addresses using Python</h1>

<p>
Below is a simple Python example that generates MAC addresses with support for
a custom prefix, control over the locally administered bit, and a configurable
number of generated addresses.
</p>

<p>
The first byte is automatically normalized to ensure correct unicast behavior
and optional local administration.
</p>

<div class="code-container">
    <div class="code-header">
        <span>Python Code</span>
    </div>
    <pre><code class="language-python" id="python_code">import random
from typing import List


def normalize_first_byte(byte: int, locally_administered: bool) -> int:
    # Clear I/G bit (bit 0) → unicast
    byte &= 0b11111110

    # Set or clear U/L bit (bit 1)
    if locally_administered:
        byte |= 0b00000010
    else:
        byte &= 0b11111101

    return byte


def generate_mac_addresses(
    prefix: str = "",
    locally_administered: bool = True,
    count: int = 1
) -> List[str]:
    """
    Generate MAC addresses.

    :param prefix: Optional hex prefix (e.g. '02:AB:CD' or '02ABCD')
    :param locally_administered: Set U/L bit if True
    :param count: Number of MAC addresses to generate
    :return: List of MAC address strings
    """

    # Normalize prefix
    hex_prefix = "".join(c for c in prefix if c.isalnum()).upper()
    if len(hex_prefix) % 2 != 0 or len(hex_prefix) > 10:
        raise ValueError("Prefix must contain 0–5 bytes")

    prefix_bytes = [
        int(hex_prefix[i:i + 2], 16)
        for i in range(0, len(hex_prefix), 2)
    ]

    macs = []

    for _ in range(count):
        bytes_ = prefix_bytes.copy()

        # Generate remaining bytes
        while len(bytes_) < 6:
            bytes_.append(random.randint(0, 255))

        # Normalize first byte
        bytes_[0] = normalize_first_byte(bytes_[0], locally_administered)

        mac = ":".join(f"{b:02X}" for b in bytes_)
        macs.append(mac)

    return macs


# Example usage
if __name__ == "__main__":
    macs = generate_mac_addresses(
        prefix="02:AB",
        locally_administered=True,
        count=3
    )

    for mac in macs:
        print(mac)
</code></pre>
    <button id="copy_python_button" class="btn-copy" onclick="copyPythonCode()" style="position: absolute; top: 12px; right: 20px; z-index: 10;">
        <!-- SVG will be inserted by JavaScript -->
    </button>
</div>

<script>
function copyPythonCode() {
    var codeElement = document.getElementById('python_code');
    var codeText = codeElement.textContent;
    var copyButton = document.getElementById('copy_python_button');
    
    if (codeText) {
        navigator.clipboard.writeText(codeText).then(function() {
            // Change icon to green checkmark
            copyButton.innerHTML = SVG_ICONS.check;
            copyButton.style.backgroundColor = '#4CAF50';
            
            // Restore original icon after 3 seconds
            setTimeout(function() {
                copyButton.innerHTML = SVG_ICONS.copy;
                copyButton.style.backgroundColor = '#6c757d';
            }, 3000);
        }, function(err) {
            console.error('Failed to copy code: ', err);
            alert('Failed to copy code to clipboard');
        });
    } else {
        alert('No code to copy.');
    }
}

// Initialize copy button icon when page loads
document.addEventListener('DOMContentLoaded', function() {
    var copyButton = document.getElementById('copy_python_button');
    if (copyButton && typeof SVG_ICONS !== 'undefined') {
        copyButton.innerHTML = SVG_ICONS.copy;
    }
});
</script>

{#bottom.html#}
